{"paragraphs":[{"text":"%md\n# A Data Fabric for Computer Vision\n\nThis demos shows how MapR can provide computer vision applications with a data fabric for storing images and metadata in a global namespace that synchronizes across datacenters.\n\nImages are ingested and processed with ML based inferencing in real-time on GPUs at the edge. Raw images and inference results are saved in MapR-XD and MapR-DB, then mirrored to the cloud where they are analyzed in this Zeppelin notebook using the MapR Data Science Refinery.\n<br><br><br>\n\n\n","user":"mapr","dateUpdated":"2018-02-24T05:37:04+0000","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala","editorHide":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1519449953865_-1198164963","id":"20180224-052553_55018929","dateCreated":"2018-02-24T05:25:53+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2818","dateFinished":"2018-02-24T05:37:01+0000","dateStarted":"2018-02-24T05:37:01+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>A Data Fabric for Computer Vision</h1>\n<p>This demos shows how MapR can provide computer vision applications with a data fabric for storing images and metadata in a global namespace that synchronizes across datacenters.</p>\n<p>Images are ingested and processed with ML based inferencing in real-time on GPUs at the edge. Raw images and inference results are saved in MapR-XD and MapR-DB, then mirrored to the cloud where they are analyzed in this Zeppelin notebook using the MapR Data Science Refinery.<br/><br><br><br></p>\n</div>"}]}},{"user":"mapr","config":{"colWidth":6,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1519447469837_1886795522","id":"20180224-044429_1656119005","dateCreated":"2018-02-24T04:44:29+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:2611","text":"%md\n<br>\n<img src=\"https://github.com/mapr-demos/smartspaces/blob/master/smartspaces_dataflow.png?raw=true\" width=100%>\n","dateUpdated":"2018-02-24T05:25:48+0000","dateFinished":"2018-02-24T05:25:48+0000","dateStarted":"2018-02-24T05:25:48+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<br>\n<img src=\"https://github.com/mapr-demos/smartspaces/blob/master/smartspaces_dataflow.png?raw=true\" width=100%>\n</div>"}]}},{"title":"Load Spark libraries","text":"import com.fasterxml.jackson.annotation.{JsonIgnoreProperties, JsonProperty}\nimport org.apache.spark.{SparkConf, SparkContext}\nimport com.mapr.db.spark._\nimport spark.implicits._\nimport org.apache.spark.sql.functions._\nimport com.mapr.db.spark.impl.OJAIDocument\nimport org.apache.spark.sql.functions.unix_timestamp\nimport org.apache.spark.sql.types.TimestampType\nval sqlContext = new org.apache.spark.sql.SQLContext(sc)\n","user":"mapr","dateUpdated":"2018-02-24T04:28:57+0000","config":{"tableHide":true,"editorSetting":{"language":"scala","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/scala","title":true,"results":{},"enabled":true,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<font color=\"red\">Previous livy session is expired, new livy session is created. Paragraphs that depend on this paragraph need to be re-executed!</font>"},{"type":"TEXT","data":"warning: there was one deprecation warning; re-run with -deprecation for details\nsqlContext: org.apache.spark.sql.SQLContext = org.apache.spark.sql.SQLContext@f455532"}]},"apps":[],"jobName":"paragraph_1517808329838_1465938514","id":"20180116-233211_1534791817","dateCreated":"2018-02-04T21:25:29+0000","dateStarted":"2018-02-24T04:28:58+0000","dateFinished":"2018-02-24T04:29:38+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:267"},{"title":"Load image data from MapR-DB","text":"// MapR-DB table returned as an RDD where each row is a JSON document\nval rdd = sc.loadFromMapRDB(\"/mapr/my.cluster.com/apps/face_detection_table\")\nval stringrdd = rdd.map(x => x.getDoc.asJsonString())\nval df = sqlContext.read.json(stringrdd)\n\n// Format timestamps for easier time-series analysis\nval df2 = df.select($\"*\", unix_timestamp($\"timestamp\", \"yyyyMMddHHmmss\").cast(TimestampType).as(\"timestamp_type\"),\ndate_format(unix_timestamp(substring($\"timestamp\",9,4), \"HHmm\").cast(TimestampType), \"HH:mm\").as(\"time\"),\ndate_format(unix_timestamp(substring($\"timestamp\",5,4), \"MMdd\").cast(TimestampType), \"MM/dd\").as(\"monthdate\"),\ndayofmonth(unix_timestamp($\"timestamp\", \"yyyyMMddHHmmss\").cast(TimestampType)).as(\"dayofmonth\"),\nhour(unix_timestamp($\"timestamp\", \"yyyyMMddHHmmss\").cast(TimestampType)).as(\"hour\"), \nminute(unix_timestamp($\"timestamp\", \"yyyyMMddHHmmss\").cast(TimestampType)).as(\"minute\"))\n\n// Create temporary view into the face_detection_table so we can analyze it with Spark SQL\ndf2.createOrReplaceTempView(\"face_detection_table\")\nprintln(\"%html <h1>Size of image archive in MapR-DB: \" + rdd.count + \"</h1>\")","user":"mapr","dateUpdated":"2018-02-24T04:40:04+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/scala","title":true,"results":{},"enabled":true,"tableHide":false,"editorHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Size of image archive in MapR-DB: 10143</h1>"}]},"apps":[],"jobName":"paragraph_1517808329851_1471324998","id":"20180116-233216_1017615695","dateCreated":"2018-02-04T21:25:29+0000","dateStarted":"2018-02-24T04:40:04+0000","dateFinished":"2018-02-24T04:40:06+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:268"},{"title":"When and how many faces are detected?","text":"%sql\nSELECT monthdate, avg(numboxes) as numboxes, time\n  from face_detection_table where monthdate != \"null\" group by monthdate, time order by time ASC\n","user":"mapr","dateUpdated":"2018-02-24T04:30:37+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"lineChart","height":300,"optionOpen":false,"setting":{"lineChart":{"forceY":false,"lineWithFocus":false},"multiBarChart":{}},"commonSetting":{},"keys":[{"name":"time","index":2,"aggr":"sum"}],"groups":[{"name":"monthdate","index":0,"aggr":"sum"}],"values":[{"name":"numboxes","index":1,"aggr":"sum"}]},"helium":{}}},"enabled":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"monthdate\tnumboxes\ttime\n02/22\t0.3076923076923077\t10:37\n02/22\t1.25\t10:38\n02/22\t2.1333333333333333\t10:39\n02/22\t0.4117647058823529\t10:40\n02/22\t0.25\t10:41\n02/22\t0.26666666666666666\t10:42\n02/22\t1.6\t10:43\n02/22\t1.375\t10:44\n02/22\t1.4\t10:45\n02/22\t1.2666666666666666\t10:46\n02/22\t1.6666666666666667\t10:47\n02/22\t0.4\t10:48\n02/22\t0.4375\t10:49\n02/22\t0.6428571428571429\t10:50\n02/22\t0.3125\t10:51\n02/22\t2.6\t10:52\n02/22\t3.2\t10:53\n02/22\t0.8666666666666667\t10:54\n02/22\t0.3125\t10:55\n02/22\t1.4666666666666666\t10:56\n02/22\t1.8666666666666667\t10:57\n02/22\t0.4375\t10:58\n02/22\t0.4666666666666667\t10:59\n02/22\t0.8\t11:00\n02/22\t2.2666666666666666\t11:01\n02/22\t1.2666666666666666\t11:02\n02/22\t1.1333333333333333\t11:03\n02/22\t0.8\t11:04\n02/22\t1.0\t11:05\n02/22\t1.0666666666666667\t11:06\n02/22\t1.2\t11:07\n02/22\t2.6\t11:08\n02/22\t0.5333333333333333\t11:09\n02/22\t0.3333333333333333\t11:10\n02/22\t0.5\t11:11\n02/22\t1.5625\t11:12\n02/22\t1.4666666666666666\t11:13\n02/22\t1.0\t11:14\n02/22\t1.2\t11:15\n02/22\t1.6875\t11:16\n02/22\t0.7333333333333333\t11:17\n02/22\t0.13333333333333333\t11:18\n02/22\t1.0\t11:19\n02/22\t1.1333333333333333\t11:20\n02/22\t1.6111111111111112\t11:21\n02/22\t0.9333333333333333\t11:22\n02/22\t0.1875\t11:23\n02/22\t0.25\t11:24\n02/22\t1.4\t11:25\n02/22\t0.4666666666666667\t11:26\n02/22\t2.0\t11:27\n02/22\t0.7142857142857143\t11:28\n02/22\t0.4666666666666667\t11:29\n02/22\t2.3333333333333335\t11:30\n02/22\t1.5333333333333334\t11:31\n02/22\t2.1333333333333333\t11:32\n02/22\t1.25\t11:33\n02/22\t1.3333333333333333\t11:34\n02/22\t2.0714285714285716\t11:35\n02/22\t2.5\t11:36\n02/22\t1.0\t11:37\n02/22\t1.5333333333333334\t11:38\n02/22\t1.1333333333333333\t11:39\n02/22\t0.5333333333333333\t11:40\n02/22\t0.6666666666666666\t11:41\n02/22\t0.13333333333333333\t11:42\n02/22\t0.26666666666666666\t11:43\n02/22\t0.9333333333333333\t11:44\n02/22\t1.0\t11:45\n02/22\t0.4666666666666667\t11:46\n02/22\t1.0\t11:47\n02/22\t0.9285714285714286\t11:48\n02/22\t0.125\t11:49\n02/22\t0.13333333333333333\t11:50\n02/22\t0.6666666666666666\t11:51\n02/22\t2.8\t11:52\n02/22\t1.1333333333333333\t11:53\n02/22\t1.0\t11:54\n02/22\t1.9333333333333333\t11:55\n02/22\t0.26666666666666666\t11:56\n02/22\t0.5625\t11:57\n02/22\t0.2\t11:58\n02/22\t0.06666666666666667\t11:59\n02/22\t0.26666666666666666\t12:00\n02/22\t0.9333333333333333\t12:01\n02/22\t0.0625\t12:02\n02/22\t0.26666666666666666\t12:03\n02/22\t0.3333333333333333\t12:04\n02/22\t0.0\t12:05\n02/22\t0.3333333333333333\t12:06\n02/22\t0.0\t12:07\n02/22\t0.13333333333333333\t12:08\n02/22\t0.26666666666666666\t12:09\n02/22\t0.4375\t12:10\n02/22\t0.26666666666666666\t12:11\n02/22\t0.4666666666666667\t12:12\n02/22\t0.2\t12:13\n02/22\t0.125\t12:14\n02/22\t0.0625\t12:15\n02/22\t0.06666666666666667\t12:16\n02/22\t0.06666666666666667\t12:17\n02/22\t0.2\t12:18\n02/22\t0.0625\t12:19\n02/22\t0.13333333333333333\t12:20\n02/22\t0.25\t12:21\n02/22\t0.13333333333333333\t12:22\n02/22\t0.06666666666666667\t12:23\n02/22\t0.0625\t12:24\n02/22\t0.3333333333333333\t12:25\n02/22\t0.4\t12:26\n02/22\t0.26666666666666666\t12:27\n02/22\t0.2\t12:28\n02/22\t0.0\t12:29\n02/22\t0.0\t12:30\n02/22\t0.26666666666666666\t12:31\n02/22\t0.1875\t12:32\n02/22\t0.07142857142857142\t12:33\n02/22\t0.06666666666666667\t12:34\n02/22\t0.125\t12:35\n02/22\t0.4666666666666667\t12:36\n02/22\t0.2\t12:37\n02/22\t0.2\t12:38\n02/22\t0.13333333333333333\t12:39\n02/22\t0.4\t12:40\n02/22\t0.3333333333333333\t12:41\n02/22\t0.3333333333333333\t12:42\n02/22\t0.2\t12:43\n02/22\t0.3333333333333333\t12:44\n02/22\t1.6\t12:45\n02/22\t1.2\t12:46\n02/22\t0.875\t12:47\n02/22\t0.8666666666666667\t12:48\n02/22\t0.75\t12:49\n02/22\t0.8666666666666667\t12:50\n02/22\t1.0625\t12:51\n02/22\t0.875\t12:52\n02/22\t0.0\t12:53\n02/22\t0.125\t12:54\n02/22\t0.3333333333333333\t12:55\n02/22\t0.0\t12:56\n02/22\t0.3125\t12:57\n02/22\t0.8181818181818182\t12:58\n02/23\t0.2222222222222222\t13:39\n02/23\t0.5714285714285714\t13:40\n02/23\t0.13333333333333333\t13:41\n02/23\t0.26666666666666666\t13:42\n02/23\t0.8666666666666667\t13:43\n02/23\t0.4\t13:44\n02/23\t0.125\t13:45\n02/23\t0.06666666666666667\t13:46\n02/23\t0.06666666666666667\t13:47\n02/23\t0.06666666666666667\t13:48\n02/23\t0.13333333333333333\t13:49\n02/23\t0.1875\t13:50\n02/23\t0.9333333333333333\t13:51\n02/23\t0.9333333333333333\t13:52\n02/23\t0.4666666666666667\t13:53\n02/23\t0.5333333333333333\t13:54\n02/23\t0.3125\t13:55\n02/23\t0.3333333333333333\t13:56\n02/23\t0.125\t13:57\n02/23\t0.13333333333333333\t13:58\n02/23\t0.5625\t13:59\n02/23\t0.5\t14:00\n02/23\t0.5333333333333333\t14:01\n02/23\t0.6\t14:02\n02/23\t0.0625\t14:03\n02/23\t0.2857142857142857\t14:04\n02/23\t0.7333333333333333\t14:05\n02/23\t0.9285714285714286\t14:06\n02/23\t1.0\t14:07\n02/23\t0.4666666666666667\t14:08\n02/23\t0.25\t14:09\n02/23\t0.25\t14:10\n02/23\t0.25\t14:11\n02/23\t0.4666666666666667\t14:12\n02/23\t0.625\t14:13\n02/23\t0.125\t14:14\n02/23\t0.375\t14:15\n02/23\t0.26666666666666666\t14:16\n02/23\t0.125\t14:17\n02/23\t0.4375\t14:18\n02/23\t0.4375\t14:19\n02/23\t0.13333333333333333\t14:20\n02/23\t0.125\t14:21\n02/23\t0.0625\t14:22\n02/23\t0.5333333333333333\t14:23\n02/23\t0.25\t14:24\n02/23\t0.35294117647058826\t14:25\n02/23\t0.1875\t14:26\n02/23\t0.4666666666666667\t14:27\n02/23\t0.7333333333333333\t14:28\n02/23\t0.9375\t14:29\n02/23\t0.3333333333333333\t14:30\n02/23\t0.625\t14:31\n02/23\t0.5\t14:32\n02/23\t0.375\t14:33\n02/23\t0.13333333333333333\t14:34\n02/23\t0.5\t14:35\n02/23\t0.4\t14:36\n02/23\t0.9375\t14:37\n02/23\t1.0\t14:38\n02/23\t0.125\t14:39\n02/23\t0.0\t14:40\n02/23\t0.5\t14:41\n02/23\t0.4\t14:42\n02/23\t0.4\t14:43\n02/23\t0.1875\t14:44\n02/23\t0.5625\t14:45\n02/23\t0.5\t14:46\n02/23\t0.3333333333333333\t14:47\n02/23\t0.625\t14:48\n02/23\t0.4666666666666667\t14:49\n02/23\t0.5625\t14:50\n02/23\t0.26666666666666666\t14:51\n02/23\t0.125\t14:52\n02/23\t0.13333333333333333\t14:53\n02/23\t0.35294117647058826\t14:54\n02/23\t0.13333333333333333\t14:55\n02/23\t0.8666666666666667\t14:56\n02/23\t0.75\t14:57\n02/23\t0.4\t14:58\n02/23\t0.4\t14:59\n02/23\t0.9333333333333333\t15:00\n02/23\t1.25\t15:01\n02/23\t1.0\t15:02\n02/23\t0.8125\t15:03\n02/23\t1.0666666666666667\t15:04\n02/23\t0.375\t15:05\n02/23\t1.0\t15:06\n02/23\t0.3333333333333333\t15:07\n02/23\t0.1875\t15:08\n02/23\t0.5\t15:09\n02/23\t0.3125\t15:10\n02/23\t0.6\t15:11\n02/23\t0.6\t15:12\n02/23\t0.26666666666666666\t15:13\n02/23\t0.4666666666666667\t15:14\n02/23\t0.17647058823529413\t15:15\n02/23\t0.3333333333333333\t15:16\n02/23\t0.625\t15:17\n02/23\t0.8666666666666667\t15:18\n02/23\t0.75\t15:19\n02/23\t1.0\t15:20\n02/23\t0.8\t15:21\n02/23\t0.125\t15:22\n02/23\t0.3333333333333333\t15:23\n02/23\t0.26666666666666666\t15:24\n02/23\t0.4666666666666667\t15:25\n02/23\t0.25\t15:26\n02/23\t0.26666666666666666\t15:27\n02/23\t0.0625\t15:28\n02/23\t0.5333333333333333\t15:29\n02/23\t0.8125\t15:30\n02/23\t0.5\t15:31\n02/23\t0.4666666666666667\t15:32\n02/23\t0.7857142857142857\t15:33\n02/23\t0.75\t15:34\n02/23\t1.0666666666666667\t15:35\n02/23\t0.4\t15:36\n02/23\t0.625\t15:37\n02/23\t0.8\t15:38\n02/23\t0.5333333333333333\t15:39\n02/23\t0.6\t15:40\n02/23\t0.29411764705882354\t15:41\n02/23\t0.9333333333333333\t15:42\n02/23\t0.8\t15:43\n02/23\t0.125\t15:44\n02/23\t0.25\t15:45\n02/23\t0.6\t15:46\n02/23\t0.5\t15:47\n02/23\t0.0\t15:48\n02/23\t0.1875\t15:49\n02/23\t0.625\t15:50\n02/23\t0.6\t15:51\n02/23\t0.3125\t15:52\n02/23\t0.4\t15:53\n02/23\t0.1875\t15:54\n02/23\t0.1875\t15:55\n02/23\t0.4\t15:56\n02/23\t0.6\t15:57\n02/23\t0.75\t15:58\n02/23\t0.375\t15:59\n02/23\t0.1875\t16:00\n02/23\t1.6\t16:01\n02/23\t2.0\t16:02\n02/23\t0.7333333333333333\t16:03\n02/23\t0.375\t16:04\n02/23\t0.6666666666666666\t16:05\n02/23\t0.26666666666666666\t16:06\n02/23\t0.875\t16:07\n02/23\t0.5625\t16:08\n02/23\t0.5333333333333333\t16:09\n02/23\t0.875\t16:10\n02/23\t2.2666666666666666\t16:11\n02/23\t0.6666666666666666\t16:12\n02/23\t0.375\t16:13\n02/23\t0.26666666666666666\t16:14\n02/23\t0.5625\t16:15\n02/23\t0.3125\t16:16\n02/23\t0.5625\t16:17\n02/23\t0.8125\t16:18\n02/23\t0.9333333333333333\t16:19\n02/23\t1.0\t16:20\n02/23\t0.3125\t16:21\n02/23\t0.0625\t16:22\n02/23\t0.6875\t16:23\n02/23\t1.1875\t16:24\n02/23\t0.625\t16:25\n02/23\t0.3125\t16:26\n02/23\t0.0625\t16:27\n02/23\t0.29411764705882354\t16:28\n02/23\t0.5333333333333333\t16:29\n02/23\t0.1875\t16:30\n02/23\t0.8823529411764706\t16:31\n02/23\t0.25\t16:32\n02/23\t0.0\t16:33\n02/23\t1.125\t16:34\n02/23\t0.25\t16:35\n02/23\t0.5\t16:36\n02/23\t1.0\t16:37\n02/23\t0.0625\t16:38\n02/23\t0.125\t16:39\n02/23\t0.0625\t16:40\n02/23\t0.75\t16:41\n02/23\t0.125\t16:42\n02/23\t0.8125\t16:43\n02/23\t0.9375\t16:44\n02/23\t0.25\t16:45\n02/23\t0.0625\t16:46\n02/23\t0.375\t16:47\n02/23\t0.11764705882352941\t16:48\n02/23\t0.1875\t16:49\n02/23\t0.1875\t16:50\n02/23\t1.2\t16:51\n02/23\t0.0625\t16:52\n02/23\t0.125\t16:53\n02/23\t0.25\t16:54\n02/23\t0.4375\t16:55\n02/23\t0.3125\t16:56\n02/23\t0.75\t16:57\n02/23\t0.3333333333333333\t16:58\n02/23\t0.0625\t16:59\n02/23\t0.0625\t17:00\n02/23\t0.13333333333333333\t17:01\n02/23\t0.8666666666666667\t17:02\n02/23\t0.3125\t17:03\n02/23\t0.6666666666666666\t17:04\n02/23\t0.375\t17:05\n02/23\t0.3333333333333333\t17:06\n02/23\t0.0\t17:07\n02/23\t0.13333333333333333\t17:08\n02/23\t0.1875\t17:09\n02/23\t0.4375\t17:10\n02/23\t0.125\t17:11\n02/23\t0.25\t17:12\n02/23\t0.47058823529411764\t17:13\n02/23\t0.0\t17:14\n02/23\t0.6666666666666666\t17:15\n02/23\t0.8125\t17:16\n02/23\t0.0\t17:17\n02/23\t0.06666666666666667\t17:18\n02/23\t0.4375\t17:19\n02/23\t0.125\t17:20\n02/23\t0.125\t17:21\n02/23\t0.4375\t17:22\n02/23\t0.0\t17:23\n02/23\t0.4666666666666667\t17:24\n02/23\t0.11764705882352941\t17:25\n02/23\t0.625\t17:26\n02/23\t0.8125\t17:27\n02/23\t0.375\t17:28\n02/23\t0.5333333333333333\t17:29\n02/23\t0.25\t17:30\n02/23\t0.5\t17:31\n02/23\t0.06666666666666667\t17:32\n02/23\t0.0\t17:33\n02/23\t0.8125\t17:34\n02/23\t0.0625\t17:35\n02/23\t0.0625\t17:36\n02/23\t0.125\t17:37\n02/23\t0.4\t17:38\n02/23\t0.125\t17:39\n02/23\t0.3333333333333333\t17:40\n02/23\t0.1875\t17:41\n02/23\t0.4375\t17:42\n02/23\t0.26666666666666666\t17:43\n02/23\t0.13333333333333333\t17:44\n02/23\t0.0\t17:45\n02/23\t0.0\t17:46\n02/23\t0.0\t17:47\n02/23\t0.0625\t17:48\n02/23\t0.1875\t17:49\n02/23\t0.0625\t17:50\n02/23\t0.07142857142857142\t17:51\n02/23\t0.4375\t17:52\n02/23\t0.06666666666666667\t17:53\n02/23\t0.0\t17:54\n02/23\t0.0625\t17:55\n02/23\t0.21428571428571427\t17:56\n02/23\t0.75\t17:57\n02/23\t0.5333333333333333\t17:58\n02/23\t0.2\t17:59\n02/23\t0.375\t18:00\n02/23\t0.26666666666666666\t18:01\n02/23\t0.3125\t18:02\n02/23\t0.0\t18:03\n02/23\t0.25\t18:04\n02/23\t1.2\t18:05\n02/23\t0.0\t18:06\n02/23\t0.13333333333333333\t18:07\n02/23\t0.0\t18:08\n02/23\t0.0\t18:09\n02/23\t0.125\t18:10\n02/23\t0.0\t18:11\n02/23\t0.0\t18:12\n02/23\t0.0\t18:13\n02/23\t0.13333333333333333\t18:14\n02/23\t0.06666666666666667\t18:15\n02/23\t0.0\t18:16\n02/23\t0.0\t18:17\n02/23\t0.26666666666666666\t18:18\n02/23\t0.0\t18:19\n02/23\t0.0\t18:20\n02/23\t0.0625\t18:21\n02/23\t0.06666666666666667\t18:22\n02/23\t0.06666666666666667\t18:23\n02/23\t0.26666666666666666\t18:24\n02/23\t0.14285714285714285\t18:25\n02/23\t0.13333333333333333\t18:26\n02/23\t0.6\t18:27\n02/23\t0.4666666666666667\t18:28\n02/23\t0.0\t18:29\n02/23\t0.2\t18:30\n02/23\t0.2\t18:31\n02/23\t0.06666666666666667\t18:32\n02/23\t0.25\t18:33\n02/23\t0.3333333333333333\t18:34\n02/23\t0.5714285714285714\t18:35\n02/23\t0.25\t18:36\n02/23\t0.26666666666666666\t18:37\n02/23\t0.06666666666666667\t18:38\n02/23\t0.0\t18:39\n02/23\t0.26666666666666666\t18:40\n02/23\t1.1428571428571428\t18:41\n02/23\t0.2\t18:42\n02/23\t0.25\t18:43\n02/23\t0.06666666666666667\t18:44\n02/23\t0.3333333333333333\t18:45\n02/23\t0.13333333333333333\t18:46\n02/23\t0.3333333333333333\t18:47\n02/23\t0.2\t18:48\n02/23\t0.6666666666666666\t18:49\n02/23\t0.0\t18:50\n02/23\t0.6\t18:51\n02/23\t0.0\t18:52\n02/23\t0.06666666666666667\t18:53\n02/23\t0.2\t18:54\n02/23\t0.3333333333333333\t18:55\n02/23\t0.13333333333333333\t18:56\n02/23\t0.06666666666666667\t18:57\n02/23\t0.06666666666666667\t18:58\n02/23\t0.0625\t18:59\n02/23\t0.4\t19:00\n02/23\t0.06666666666666667\t19:01\n02/23\t0.0\t19:02\n02/23\t0.0625\t19:03\n02/23\t0.06666666666666667\t19:04\n02/23\t0.0\t19:05\n02/23\t0.0625\t19:06\n02/23\t0.0\t19:07\n02/23\t0.0\t19:08"}]},"apps":[],"jobName":"paragraph_1517808329855_1471709747","id":"20180116-235132_14480253","dateCreated":"2018-02-04T21:25:29+0000","dateStarted":"2018-02-24T04:30:37+0000","dateFinished":"2018-02-24T04:30:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:269"},{"title":"Histogram showing when faces are detected ","text":"%sql\n  SELECT sum(numboxes), hour, minute\n  from face_detection_table group by hour, minute order by hour\n","user":"mapr","dateUpdated":"2018-02-24T04:33:23+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sql","editorHide":false,"title":true,"results":{"0":{"graph":{"mode":"multiBarChart","height":300,"optionOpen":false,"setting":{"lineChart":{},"multiBarChart":{},"stackedAreaChart":{}},"commonSetting":{},"keys":[{"name":"minute","index":2,"aggr":"sum"}],"groups":[],"values":[{"name":"sum(numboxes)","index":0,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"sum(numboxes)\thour\tminute\n39\t10\t54\n12\t10\t41\n21\t10\t58\n12\t10\t42\n66\t10\t44\n117\t10\t52\n15\t10\t55\n12\t10\t37\n18\t10\t48\n63\t10\t45\n84\t10\t57\n72\t10\t43\n60\t10\t38\n21\t10\t59\n21\t10\t49\n57\t10\t46\n15\t10\t51\n27\t10\t50\n21\t10\t40\n75\t10\t47\n144\t10\t53\n66\t10\t56\n96\t10\t39\n4\t11\t42\n34\t11\t39\n102\t11\t1\n20\t11\t41\n54\t11\t7\n58\t11\t55\n14\t11\t26\n66\t11\t13\n30\t11\t37\n28\t11\t22\n6\t11\t18\n46\t11\t38\n51\t11\t20\n30\t11\t54\n70\t11\t30\n40\t11\t34\n36\t11\t0\n21\t11\t11\n45\t11\t14\n117\t11\t8\n45\t11\t19\n33\t11\t17\n8\t11\t56\n40\t11\t33\n58\t11\t35\n8\t11\t43\n45\t11\t5\n48\t11\t6\n6\t11\t58\n20\t11\t51\n26\t11\t48\n14\t11\t46\n18\t11\t57\n58\t11\t21\n34\t11\t53\n54\t11\t15\n84\t11\t52\n28\t11\t44\n81\t11\t16\n4\t11\t49\n42\t11\t25\n24\t11\t9\n16\t11\t40\n2\t11\t59\n57\t11\t2\n80\t11\t36\n8\t11\t24\n4\t11\t50\n64\t11\t32\n46\t11\t31\n60\t11\t27\n32\t11\t45\n75\t11\t12\n6\t11\t23\n51\t11\t3\n30\t11\t47\n15\t11\t10\n20\t11\t28\n36\t11\t4\n14\t11\t29\n6\t12\t38\n8\t12\t27\n8\t12\t9\n2\t12\t24\n24\t12\t49\n4\t12\t54\n6\t12\t37\n4\t12\t14\n0\t12\t56\n0\t12\t29\n8\t12\t0\n4\t12\t39\n6\t12\t32\n48\t12\t45\n26\t12\t48\n0\t12\t7\n4\t12\t8\n10\t12\t25\n14\t12\t12\n10\t12\t41\n10\t12\t42\n12\t12\t40\n2\t12\t17\n0\t12\t30\n4\t12\t20\n0\t12\t5\n10\t12\t4\n6\t12\t28\n2\t12\t23\n36\t12\t46\n4\t12\t35\n34\t12\t51\n2\t12\t19\n28\t12\t47\n14\t12\t36\n8\t12\t31\n6\t12\t18\n28\t12\t1\n6\t12\t43\n12\t12\t26\n2\t12\t2\n10\t12\t6\n10\t12\t57\n2\t12\t15\n8\t12\t11\n6\t12\t13\n28\t12\t52\n18\t12\t58\n14\t12\t10\n2\t12\t16\n2\t12\t33\n0\t12\t53\n4\t12\t22\n8\t12\t21\n8\t12\t3\n10\t12\t44\n26\t12\t50\n2\t12\t34\n10\t12\t55\n1\t13\t48\n1\t13\t47\n4\t13\t42\n3\t13\t50\n2\t13\t57\n8\t13\t40\n14\t13\t51\n2\t13\t58\n1\t13\t46\n2\t13\t39\n7\t13\t53\n14\t13\t52\n5\t13\t56\n5\t13\t55\n13\t13\t43\n2\t13\t49\n2\t13\t41\n6\t13\t44\n9\t13\t59\n8\t13\t54\n2\t13\t45\n7\t14\t49\n4\t14\t51\n8\t14\t35\n15\t14\t38\n6\t14\t15\n4\t14\t4\n6\t14\t36\n1\t14\t22\n6\t14\t59\n7\t14\t18\n6\t14\t43\n2\t14\t39\n8\t14\t23\n7\t14\t19\n7\t14\t0\n2\t14\t21\n3\t14\t26\n7\t14\t27\n10\t14\t48\n3\t14\t44\n8\t14\t46\n5\t14\t30\n4\t14\t11\n9\t14\t2\n4\t14\t9\n2\t14\t34\n8\t14\t41\n2\t14\t53\n2\t14\t52\n8\t14\t32\n2\t14\t20\n9\t14\t50\n10\t14\t31\n15\t14\t29\n15\t14\t7\n4\t14\t16\n6\t14\t33\n11\t14\t28\n15\t14\t37\n5\t14\t47\n7\t14\t12\n6\t14\t54\n2\t14\t14\n1\t14\t3\n6\t14\t42\n8\t14\t1\n0\t14\t40\n4\t14\t24\n12\t14\t57\n9\t14\t45\n11\t14\t5\n10\t14\t13\n6\t14\t25\n13\t14\t6\n7\t14\t8\n13\t14\t56\n4\t14\t10\n2\t14\t55\n2\t14\t17\n6\t14\t58\n3\t15\t8\n14\t15\t42\n6\t15\t36\n9\t15\t57\n7\t15\t14\n3\t15\t49\n1\t15\t28\n3\t15\t15\n15\t15\t2\n4\t15\t26\n3\t15\t55\n5\t15\t10\n4\t15\t45\n4\t15\t13\n6\t15\t53\n20\t15\t1\n9\t15\t51\n6\t15\t5\n6\t15\t59\n9\t15\t12\n10\t15\t50\n7\t15\t32\n12\t15\t21\n8\t15\t31\n0\t15\t48\n12\t15\t34\n12\t15\t19\n9\t15\t40\n10\t15\t17\n5\t15\t16\n14\t15\t0\n4\t15\t27\n11\t15\t33\n12\t15\t58\n5\t15\t41\n12\t15\t38\n9\t15\t11\n16\t15\t20\n12\t15\t43\n7\t15\t25\n8\t15\t29\n4\t15\t24\n6\t15\t56\n2\t15\t22\n5\t15\t7\n16\t15\t4\n8\t15\t47\n13\t15\t3\n9\t15\t46\n5\t15\t23\n15\t15\t6\n13\t15\t30\n2\t15\t44\n3\t15\t54\n8\t15\t39\n13\t15\t18\n16\t15\t35\n8\t15\t9\n5\t15\t52\n10\t15\t37\n11\t16\t3\n8\t16\t29\n1\t16\t52\n12\t16\t57\n3\t16\t0\n5\t16\t56\n6\t16\t4\n30\t16\t2\n10\t16\t25\n10\t16\t12\n19\t16\t24\n4\t16\t45\n5\t16\t26\n9\t16\t15\n4\t16\t32\n7\t16\t55\n1\t16\t46\n24\t16\t1\n4\t16\t6\n5\t16\t28\n8\t16\t9\n34\t16\t11\n4\t16\t54\n1\t16\t27\n4\t16\t14\n9\t16\t8\n14\t16\t19\n8\t16\t36\n1\t16\t40\n9\t16\t17\n0\t16\t33\n14\t16\t10\n18\t16\t34\n14\t16\t7\n17\t16\t37\n11\t16\t23\n2\t16\t39\n5\t16\t21\n3\t16\t30\n4\t16\t35\n3\t16\t50\n2\t16\t53\n10\t16\t5\n13\t16\t43\n5\t16\t58\n15\t16\t44\n2\t16\t42\n16\t16\t20\n6\t16\t13\n15\t16\t31\n2\t16\t48\n13\t16\t18\n1\t16\t38\n6\t16\t47\n5\t16\t16\n3\t16\t49\n18\t16\t51\n1\t16\t59\n12\t16\t41\n1\t16\t22\n7\t17\t52\n13\t17\t2\n2\t17\t25\n1\t17\t32\n0\t17\t33\n0\t17\t54\n0\t17\t46\n13\t17\t27\n0\t17\t14\n1\t17\t48\n3\t17\t59\n12\t17\t57\n7\t17\t19\n3\t17\t49\n4\t17\t12\n8\t17\t31\n5\t17\t6\n13\t17\t34\n7\t17\t24\n0\t17\t45\n1\t17\t51\n6\t17\t28\n2\t17\t44\n7\t17\t22\n2\t17\t39\n1\t17\t55\n2\t17\t8\n7\t17\t10\n3\t17\t9\n6\t17\t5\n10\t17\t26\n7\t17\t42\n6\t17\t38\n13\t17\t16\n1\t17\t18\n0\t17\t23\n1\t17\t35\n2\t17\t37\n3\t17\t56\n0\t17\t47\n5\t17\t40\n5\t17\t3\n4\t17\t30\n10\t17\t4\n0\t17\t7\n1\t17\t53\n2\t17\t21\n4\t17\t43\n2\t17\t1\n1\t17\t50\n2\t17\t20\n1\t17\t36\n10\t17\t15\n3\t17\t41\n8\t17\t29\n1\t17\t0\n8\t17\t13\n0\t17\t17\n2\t17\t11\n8\t17\t58\n2\t18\t56\n1\t18\t58\n3\t18\t54\n10\t18\t49\n5\t18\t47\n9\t18\t51\n0\t18\t39\n0\t18\t11\n4\t18\t36\n1\t18\t59\n3\t18\t31\n0\t18\t16\n0\t18\t29\n1\t18\t21\n1\t18\t38\n0\t18\t3\n4\t18\t33\n4\t18\t43\n1\t18\t22\n1\t18\t15\n4\t18\t37\n4\t18\t1\n8\t18\t35\n1\t18\t57\n1\t18\t32\n0\t18\t8\n2\t18\t10\n3\t18\t48\n4\t18\t4\n2\t18\t25\n2\t18\t7\n0\t18\t13\n1\t18\t53\n3\t18\t42\n0\t18\t52\n0\t18\t20\n2\t18\t26\n18\t18\t5\n3\t18\t30\n2\t18\t14\n0\t18\t9\n7\t18\t28\n6\t18\t0\n5\t18\t45\n5\t18\t2\n4\t18\t18\n0\t18\t17\n1\t18\t23\n9\t18\t27\n2\t18\t46\n5\t18\t34\n0\t18\t19\n0\t18\t6\n16\t18\t41\n4\t18\t40\n1\t18\t44\n4\t18\t24\n0\t18\t12\n5\t18\t55\n0\t18\t50\n0\t19\t2\n1\t19\t4\n1\t19\t1\n0\t19\t7\n1\t19\t3\n0\t19\t5\n1\t19\t6\n6\t19\t0\n0\t19\t8"}]},"apps":[],"jobName":"paragraph_1517808329861_1554046012","id":"20180117-102833_1010341336","dateCreated":"2018-02-04T21:25:29+0000","dateStarted":"2018-02-24T04:33:23+0000","dateFinished":"2018-02-24T04:33:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:270"},{"title":"Start a web server to access jpegs in MapR-FS","text":"%sh cd /\npython -m SimpleHTTPServer 5005","user":"mapr","dateUpdated":"2018-02-24T04:33:37+0000","config":{"tableHide":true,"editorSetting":{"language":"sh","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/sh","title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"INCOMPLETE","msg":[{"type":"TEXT","data":"172.31.33.4 - - [23/Feb/2018 20:33:41] \"GET //mapr/my.cluster.com/images/boxed-20180222103952.jpg HTTP/1.1\" 200 -\n"},{"type":"TEXT","data":"Paragraph received a SIGTERM\nExitValue: 143"}]},"apps":[],"jobName":"paragraph_1517808329864_1552891765","id":"20180119-134818_508500285","dateCreated":"2018-02-04T21:25:29+0000","dateStarted":"2018-02-24T04:33:37+0000","dateFinished":"2018-02-24T04:34:37+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:271"},{"title":"Show the image with most faces","text":"// Get the boxed image with the most boxes\nval row = df2.sort(desc(\"numboxes\")).select($\"boxed_image\", $\"monthdate\",$\"numboxes\").filter($\"monthdate\" === \"02/22\").head()\nval boxed_image = row.getString(0)\nval numboxes = row.getLong(2)\n// Load image file from local mirrored volume\nval local_image = boxed_image.replaceAll(\"nuc.cluster.com\", \"my.cluster.com\")\n// Display the image\nprint (\"%html <a href=\\\"http://172.31.35.226:5005/\"+local_image+\"\\\"<p><img src=\\\"http://172.31.35.226:5005/\"+local_image+\"\\\"</p></a><p><h1>Faces Detected: \"+numboxes+\"</h1></p>\")","user":"mapr","dateUpdated":"2018-02-24T04:33:39+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false},"colWidth":6,"editorMode":"ace/mode/scala","editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<a href=\"http://172.31.35.226:5005//mapr/my.cluster.com/images/boxed-20180222103952.jpg\"<p><img src=\"http://172.31.35.226:5005//mapr/my.cluster.com/images/boxed-20180222103952.jpg\"</p></a><p><h1>Faces Detected: 8</h1></p>"}]},"apps":[],"jobName":"paragraph_1517808329862_1555200259","id":"20180119-085620_286803398","dateCreated":"2018-02-04T21:25:29+0000","dateStarted":"2018-02-24T04:33:39+0000","dateFinished":"2018-02-24T04:33:41+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:272"},{"title":"Show the most recent image","text":"// Get the newest image\nval row = df2.sort(desc(\"timestamp\")).select($\"boxed_image\",$\"numboxes\").head()\nval boxed_image = row.getString(0)\nval numboxes = row.getLong(1)\n// Display the image\nprint (\"%html <a href=\\\"http://nodea:5005/\"+boxed_image+\"\\\"<p><img src=\\\"http://nodea:5005/\"+boxed_image+\"\\\"</p></a><p><h1>Faces Detected: \"+numboxes+\"</h1></p>\")\n","user":"mapr","dateUpdated":"2018-02-24T04:38:03+0000","config":{"tableHide":false,"editorSetting":{"language":"scala","editOnDblClick":false},"colWidth":6,"editorMode":"ace/mode/scala","editorHide":true,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<a href=\"http://nodea:5005//mapr/nuc.cluster.com/images/boxed-20180223203755.jpg\"<p><img src=\"http://nodea:5005//mapr/nuc.cluster.com/images/boxed-20180223203755.jpg\"</p></a><p><h1>Faces Detected: 1</h1></p>"}]},"apps":[],"jobName":"paragraph_1517808329862_1555200259","id":"20180119-132711_1713529028","dateCreated":"2018-02-04T21:25:29+0000","dateStarted":"2018-02-24T04:38:03+0000","dateFinished":"2018-02-24T04:38:04+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:273"},{"user":"mapr","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"scala","editOnDblClick":false},"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1519329408735_1212162705","id":"20180222-195648_444098007","dateCreated":"2018-02-22T19:56:48+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:274"}],"name":"Smart Spaces","id":"2D5KBYDTA","angularObjects":{"2D97YVQQR:shared_process":[],"2D9EQPU3K:shared_process":[],"2D76YYTM8:shared_process":[],"2D7GSGSFY:shared_process":[],"2D8MXSGVV:shared_process":[],"2D6PV5B3H:shared_process":[],"2D9PCPZZH:shared_process":[],"2D787AB46:shared_process":[],"2D8B2HQP6:shared_process":[],"2D6CMVAQE:shared_process":[],"2D7DCHWC9:shared_process":[],"2D62YA2GD:shared_process":[],"2D8JTB2KE:shared_process":[],"2D648GCWQ:shared_process":[],"2D729PYHH:shared_process":[],"2D7NHM7P3:shared_process":[],"2D6FJHA1V:shared_process":[],"2D92DYGK8:shared_process":[],"2D9FS9E5B:shared_process":[],"2D6CQ934G:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}